<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PubHealthQA - Trợ lý Sức khỏe Công cộng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link href="/static/css/style.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="https://www.uit.edu.vn/sites/vi/files/favicon.ico" type="image/vnd.microsoft.icon">
</head>
<body>
    <div class="container-fluid vh-100 d-flex flex-column">
        <!-- Header -->
        <header class="row py-3 bg-primary text-white shadow-sm">
            <div class="col">
                <div class="d-flex align-items-center">
                    <i class="bi bi-heart-pulse fs-2 me-2"></i>
                    <h1 class="h4 m-0">PubHealthQA</h1>
                    <span class="ms-2 badge bg-light text-primary">Trợ lý Sức khỏe Công cộng</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="row flex-grow-1 overflow-hidden">
            <!-- Left Sidebar (visible on large screens) -->
            <div class="col-lg-3 d-none d-lg-block bg-light p-3 border-end">
                <div class="d-flex flex-column h-100">
                    <div class="mb-3">
                        <h5 class="text-muted mb-3">Thông tin</h5>
                        <div class="card mb-3">
                            <div class="card-body">
                                <h6 class="card-title">Về Hệ thống</h6>
                                <p class="card-text small">PubHealthQA là chatbot sử dụng công nghệ RAG kết hợp LLM để trả lời câu hỏi về sức khỏe công cộng và pháp luật y tế Việt Nam.</p>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <h5 class="text-muted mb-3">Gợi ý</h5>
                        <div class="suggestion-item mb-2 p-2 rounded" onclick="addSuggestion(this)">
                            Quyền lợi BHYT cho người cao tuổi?
                        </div>
                        <div class="suggestion-item mb-2 p-2 rounded" onclick="addSuggestion(this)">
                            Thủ tục đăng ký khám chữa bệnh ban đầu?
                        </div>
                        <div class="suggestion-item mb-2 p-2 rounded" onclick="addSuggestion(this)">
                            Quy định về an toàn thực phẩm tại cơ sở y tế?
                        </div>
                    </div>
                    <div class="mt-auto">
                        <div class="small text-muted">
                            <p class="mb-1">Dữ liệu được cập nhật: 05/2025</p>
                            <p class="mb-0">Sử dụng Groq LLM API & LangChain</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Area -->
            <div class="col-lg-9 col-md-12 d-flex flex-column overflow-hidden p-0">
                <!-- Chat Messages -->
                <div id="chat-messages" class="flex-grow-1 p-3 overflow-auto">
                    <!-- Bot welcome message -->
                    <div class="message bot-message">
                        <div class="message-content">
                            <div class="message-avatar">
                                <i class="bi bi-robot"></i>
                            </div>
                            <div class="message-text">
                                <p>Xin chào! Tôi là trợ lý sức khỏe công cộng. Tôi có thể giúp bạn trả lời các câu hỏi về sức khỏe công cộng và pháp luật y tế Việt Nam.</p>
                                <p>Bạn có thể hỏi tôi về:</p>
                                <ul>
                                    <li>Bảo hiểm y tế</li>
                                    <li>Quyền lợi người bệnh</li>
                                    <li>Thủ tục khám chữa bệnh</li>
                                    <li>Quy định y tế và pháp luật liên quan</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Messages will be added here by JavaScript -->
                </div>

                <!-- Sources panel (initially hidden) -->
                <div id="sources-panel" class="p-3 border-top" style="display: none; max-height: 200px; overflow-y: auto;">
                    <h6 class="mb-2">Nguồn tham khảo:</h6>
                    <div id="sources-content" class="small">
                        <!-- Sources will be added here by JavaScript -->
                    </div>
                </div>

                <!-- Typing indicator -->
                <div id="typing-indicator" class="p-2 border-top" style="display: none;">
                    <div class="d-flex align-items-center">
                        <span class="typing-icon me-2"><i class="bi bi-chat-dots"></i></span>
                        <span>Đang trả lời...</span>
                    </div>
                </div>

                <!-- Input Form -->
                <div class="p-3 border-top">
                    <form id="chat-form" class="d-flex">
                        <div class="input-group">
                            <textarea id="user-input" class="form-control" placeholder="Nhập câu hỏi của bạn..." rows="1"></textarea>
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-send"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="/static/js/chat.js"></script>
</body>
</html> 